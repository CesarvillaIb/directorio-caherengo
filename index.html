<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Directorio General | CAHERENGO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ESTILOS -->
<style>
body{
  margin:0;
  font-family: 'Segoe UI', sans-serif;
  background:#f4f6fb;
}
header{
  background:linear-gradient(135deg,#1e4ed8,#2563eb);
  color:white;
  padding:25px;
  text-align:center;
}
header img{
  width:90px;
  margin-bottom:10px;
}
header h1{
  margin:5px 0;
}
header p{
  opacity:.9;
}

.maps{
  display:flex;
  justify-content:center;
  gap:15px;
  margin:20px;
}
.map-btn{
  background:#e0e7ff;
  padding:15px 25px;
  border-radius:14px;
  text-decoration:none;
  color:#1e40af;
  font-weight:600;
  transition:.3s;
}
.map-btn:hover{
  background:#c7d2fe;
}

.search-box{
  max-width:500px;
  margin:20px auto;
}
.search-box input{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:1px solid #ccc;
  font-size:16px;
}

.container{
  max-width:1000px;
  margin:auto;
  padding:15px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:15px;
}

.card{
  background:white;
  border-radius:16px;
  padding:18px;
  box-shadow:0 6px 18px rgba(0,0,0,.08);
  animation:fade .4s ease;
}
@keyframes fade{
  from{opacity:0; transform:translateY(10px)}
  to{opacity:1; transform:translateY(0)}
}
.card h3{margin:0}
.card small{color:#555}
.actions{
  margin-top:10px;
  display:flex;
  gap:10px;
}
.actions button{
  border:none;
  padding:8px 12px;
  border-radius:8px;
  cursor:pointer;
}
.copy{background:#e0f2fe}
.edit{background:#fef3c7}
.delete{background:#fee2e2}

footer{
  text-align:center;
  padding:20px;
  font-size:14px;
  color:#555;
}
</style>
</head>

<body>

<header>
  <img src="ogo-caherengo.png.jpg" alt="CAHERENGO">
  <h1>Directorio General</h1>
  <p><b>CAHERENGO â€“ Uso interno</b></p>
</header>

<div class="maps">
  <a class="map-btn" target="_blank"
     href="https://www.google.com/maps/d/edit?mid=1ky2K4xB6tZ_UlTOiZLKZi6NDBbx8dqw">
     ğŸ“ Mapa 1<br>Servicios Caherengo
  </a>

  <a class="map-btn" target="_blank"
     href="https://www.google.com/maps/d/edit?mid=1zCXZ6FC6wuHO966gPZR0z8sjIqUwAQQ">
     ğŸ“ Mapa 2<br>Servicios Caherengo
  </a>
</div>

<div class="search-box">
  <input id="search" placeholder="ğŸ” Buscar por nombre, Ã¡rea o telÃ©fono">
</div>

<div class="container" id="cards"></div>

<footer>
Oficinas: Aguascalientes Â· Zapopan Â· Tlajomulco Â· Guerrero Negro Â· MÃ©rida
</footer>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCYREpFqzorJ_f30tQte7W1aXT6ikU0nQ4",
  authDomain: "directorio-caherengo.firebaseapp.com",
  projectId: "directorio-caherengo",
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const cards=document.getElementById("cards");
const search=document.getElementById("search");

let data=[];

db.collection("directorio").onSnapshot(snap=>{
  data=[];
  snap.forEach(d=>data.push({id:d.id,...d.data()}));
  render(data);
});

function render(list){
  cards.innerHTML="";
  list.forEach(d=>{
    cards.innerHTML+=`
      <div class="card">
        <h3>${d.nombre}</h3>
        <small>${d.puesto} Â· ${d.area}</small><br>
        ğŸ“ ${d.oficina}<br>
        ğŸ“§ ${d.correo}<br>
        ğŸ“ ${d.telefono}
        <div class="actions">
          <button class="copy" onclick="copy('${d.correo}')">ğŸ“§ Copiar</button>
          <button class="copy" onclick="copy('${d.telefono}')">ğŸ“ Copiar</button>
        </div>
      </div>
    `;
  });
}

search.oninput=()=>{
  const v=search.value.toLowerCase();
  render(data.filter(d=>
    d.nombre.toLowerCase().includes(v)||
    d.area.toLowerCase().includes(v)||
    d.telefono.includes(v)
  ));
};

function copy(t){
  navigator.clipboard.writeText(t);
  alert("Copiado");
}
</script>

</body>
</html>

