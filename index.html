<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Directorio General | CAHERENGO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:#f4f6fb;
}

/* HEADER */
header{
  background:linear-gradient(135deg,#1e4ed8,#2563eb);
  color:white;
  padding:30px 15px;
  text-align:center;
}
header h1{
  margin:10px 0 5px;
  font-size:28px;
}
header p{
  margin:0;
  opacity:.9;
}
.icon{
  font-size:40px;
}

/* MAPAS */
.maps{
  display:flex;
  justify-content:center;
  gap:15px;
  margin:25px 10px;
  flex-wrap:wrap;
}
.map-btn{
  background:#e0e7ff;
  padding:14px 22px;
  border-radius:14px;
  text-decoration:none;
  color:#1e40af;
  font-weight:600;
  transition:.3s;
  text-align:center;
}
.map-btn:hover{
  background:#c7d2fe;
}

/* BUSCADOR */
.search{
  max-width:500px;
  margin:10px auto 20px;
  padding:0 10px;
}
.search input{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:1px solid #ccc;
  font-size:16px;
}

/* TARJETAS */
.container{
  max-width:1100px;
  margin:auto;
  padding:15px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:16px;
}
.card{
  background:white;
  border-radius:16px;
  padding:18px;
  box-shadow:0 6px 18px rgba(0,0,0,.08);
}
.card h3{margin:0}
.card small{color:#555}
.actions{
  margin-top:10px;
  display:flex;
  gap:10px;
}
.actions button{
  border:none;
  padding:8px 12px;
  border-radius:8px;
  cursor:pointer;
}
.copy{background:#e0f2fe}

/* FOOTER */
footer{
  text-align:center;
  padding:20px;
  font-size:14px;
  color:#555;
}
</style>
</head>

<body>

<header>
  <div class="icon"></div>
  <h1>Directorio General</h1>
  <p><b>CAHERENGO 路 Uso interno</b></p>
</header>

<div class="maps">
  <a class="map-btn" target="_blank"
     href="https://www.google.com/maps/d/edit?mid=1ky2K4xB6tZ_UlTOiZLKZi6NDBbx8dqw">
      Mapa 1<br>Servicios Caherengo
  </a>

  <a class="map-btn" target="_blank"
     href="https://www.google.com/maps/d/edit?mid=1zCXZ6FC6wuHO966gPZR0z8sjIqUwAQQ">
      Mapa 2<br>Servicios Caherengo
  </a>
</div>

<div class="search">
  <input id="search" placeholder=" Buscar por nombre, 谩rea o tel茅fono">
</div>

<div class="container" id="cards"></div>

<footer>
Oficinas: Aguascalientes 路 Zapopan 路 Tlajomulco 路 Guerrero Negro 路 M茅rida
</footer>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCYREpFqzorJ_f30tQte7W1aXT6ikU0nQ4",
  authDomain: "directorio-caherengo.firebaseapp.com",
  projectId: "directorio-caherengo",
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const cards=document.getElementById("cards");
const search=document.getElementById("search");
let data=[];

db.collection("directorio").onSnapshot(snap=>{
  data=[];
  snap.forEach(d=>data.push({id:d.id,...d.data()}));
  render(data);
});

function render(list){
  cards.innerHTML="";
  list.forEach(d=>{
    cards.innerHTML+=`
      <div class="card">
        <h3>${d.nombre}</h3>
        <small>${d.puesto} 路 ${d.area}</small><br>
         ${d.oficina}<br>
         ${d.correo}<br>
         ${d.telefono}
        <div class="actions">
          <button class="copy" onclick="copy('${d.correo}')"> Copiar</button>
          <button class="copy" onclick="copy('${d.telefono}')"> Copiar</button>
        </div>
      </div>
    `;
  });
}

search.oninput=()=>{
  const v=search.value.toLowerCase();
  render(data.filter(d=>
    d.nombre.toLowerCase().includes(v)||
    d.area.toLowerCase().includes(v)||
    d.telefono.includes(v)
  ));
};

function copy(t){
  navigator.clipboard.writeText(t);
  alert("Copiado");
}
</script>

</body>
</html>
