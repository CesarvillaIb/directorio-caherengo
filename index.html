<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Directorio General | Cahrengo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<style>
:root{
  --primary:#2563eb;
  --bg:#020617;
  --card:#0f172a;
  --soft:#94a3b8;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:'Segoe UI',Arial,sans-serif;
  background:var(--bg);
  color:#fff;
}

header{
  position:sticky;
  top:0;
  z-index:10;
  padding:20px;
  background:linear-gradient(90deg,#2563eb,#1e40af);
  text-align:center;
}

header h1{margin:0;font-size:22px}
header p{margin-top:4px;font-size:13px;opacity:.85}

/* ===== FILTROS ===== */
.filters{
  display:flex;
  gap:8px;
  padding:12px 16px;
  overflow-x:auto;
}

.filters button{
  background:#020617;
  border:1px solid #334155;
  color:#94a3b8;
  padding:6px 14px;
  border-radius:999px;
  font-size:12px;
  cursor:pointer;
  white-space:nowrap;
}

.filters button.active{
  background:var(--primary);
  border-color:var(--primary);
  color:#fff;
}

.search-box{
  padding:12px 16px;
}

.search-box input{
  width:100%;
  padding:14px 18px;
  border-radius:18px;
  border:none;
  outline:none;
  font-size:14px;
}

.container{
  padding:16px;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
  gap:16px;
}

.card{
  background:var(--card);
  border-radius:18px;
  padding:18px;
  box-shadow:0 12px 30px rgba(0,0,0,.4);
  animation:fadeIn .3s ease;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(6px)}
  to{opacity:1;transform:none}
}

.card-header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
}

.avatar{
  width:42px;
  height:42px;
  border-radius:50%;
  background:var(--primary);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
}

.admin-actions{
  display:flex;
  gap:8px;
}

.admin-actions i{
  cursor:pointer;
  font-size:14px;
  opacity:.6;
}

.admin-actions i:hover{opacity:1}

.card h3{
  margin:8px 0 4px;
  font-size:16px;
}

.badge{
  display:inline-block;
  font-size:11px;
  padding:4px 10px;
  border-radius:999px;
  background:rgba(37,99,235,.18);
  color:#bfdbfe;
  margin-bottom:6px;
}

.card p{
  margin:4px 0;
  font-size:13px;
  color:var(--soft);
}

.copy{
  margin-top:6px;
  background:#020617;
  padding:8px 12px;
  border-radius:10px;
  cursor:pointer;
  position:relative;
  font-size:13px;
}

.copy::after{
  content:"Copiar";
  position:absolute;
  top:-28px;
  right:10px;
  background:var(--primary);
  padding:4px 8px;
  border-radius:8px;
  font-size:11px;
  opacity:0;
  transition:.2s;
}

.copy:hover::after{opacity:1}

.copy.copied::after{
  content:"Copiado ‚úì";
  background:#020617;
  opacity:1;
}

.actions{
  display:flex;
  gap:10px;
  margin-top:14px;
}

.actions a{
  flex:1;
  text-align:center;
  padding:10px;
  border-radius:12px;
  color:#fff;
  text-decoration:none;
  font-size:16px;
}

.mail{background:#2563eb}
.phone{background:#0f766e}
.chat{background:#15803d}

/* ===== MODAL ===== */
.modal{
  position:fixed;
  inset:0;
  background:rgba(2,6,23,.65);
  backdrop-filter:blur(6px);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:50;
}

.modal-content{
  background:#020617;
  padding:24px;
  border-radius:18px;
  width:90%;
  max-width:360px;
}

.modal-content h3{
  margin-top:0;
  font-size:18px;
}

.modal-content input{
  width:100%;
  margin-top:12px;
  padding:12px;
  border-radius:12px;
  border:1px solid #334155;
  background:#020617;
  color:#fff;
}

.modal-buttons{
  display:flex;
  gap:10px;
  margin-top:18px;
}

.modal-buttons button{
  flex:1;
  padding:10px;
  border:none;
  border-radius:12px;
  cursor:pointer;
}

.confirm{background:var(--primary);color:#fff}
.cancel{background:#020617;color:#94a3b8;border:1px solid #334155}

.input-error{
  animation:shake .25s;
}

@keyframes shake{
  0%,100%{transform:none}
  25%{transform:translateX(-4px)}
  50%{transform:translateX(4px)}
  75%{transform:translateX(-4px)}
}

footer{
  text-align:center;
  padding:24px;
  font-size:12px;
  opacity:.6;
}
</style>
</head>

<body>

<header>
  <h1>üìò Directorio General</h1>
  <p>Cahrengo | Uso interno</p>
</header>

<div class="filters">
  <button class="active" onclick="setOffice('')">Todas</button>
  <button onclick="setOffice('Zapopan')">Zapopan</button>
  <button onclick="setOffice('Tlajomulco')">Tlajomulco</button>
  <button onclick="setOffice('M√©rida')">M√©rida</button>
  <button onclick="setOffice('Aguascalientes')">Aguascalientes</button>
  <button onclick="setOffice('Guerrero Negro')">Guerrero Negro</button>
</div>

<div class="search-box">
  <input id="search" placeholder="Buscar por nombre, √°rea, correo, tel√©fono u oficina‚Ä¶" onkeyup="applyFilters()">
</div>

<div class="container" id="cards"></div>

<footer>Directorio interno ¬∑ Administrado por Sistemas</footer>

<!-- MODAL CLAVE -->
<div class="modal" id="authModal">
  <div class="modal-content">
    <h3>Acceso administrativo</h3>
    <input type="password" id="passInput" placeholder="Ingrese la clave">
    <div class="modal-buttons">
      <button class="confirm" onclick="validatePass()">Continuar</button>
      <button class="cancel" onclick="closeModal()">Cancelar</button>
    </div>
  </div>
</div>

<script>
const ADMIN_PASS="KR@+0s117";
let pendingAction=null;
let officeFilter="";

const people=[
 {
  nombre:"Joel Omar Cuellar Blanco",
  puesto:"Secretario de Relaciones y Conflictos",
  area:"Direcci√≥n",
  oficina:"Zapopan",
  correo:"joel.cuellar@caherengo.mx",
  telefono:"3321836481"
 }
];

function initials(name){
 return name.split(" ").slice(0,2).map(n=>n[0]).join("");
}

function renderCards(data){
 const c=document.getElementById("cards");
 c.innerHTML="";
 data.forEach((p,i)=>{
  c.innerHTML+=`
  <div class="card">
   <div class="card-header">
    <div class="avatar">${initials(p.nombre)}</div>
    <div class="admin-actions">
     <i class="bi bi-pencil" onclick="askPass(()=>editPerson(${i}))"></i>
     <i class="bi bi-trash" onclick="askPass(()=>deletePerson(${i}))"></i>
    </div>
   </div>

   <h3>${p.nombre}</h3>
   <div class="badge">${p.oficina}</div>

   <p><strong>Puesto:</strong> ${p.puesto}</p>
   <p><strong>√Årea:</strong> ${p.area}</p>

   <div class="copy" onclick="copyText('${p.correo}',this)">${p.correo}</div>
   <div class="copy" onclick="copyText('${p.telefono}',this)">${p.telefono}</div>

   <div class="actions">
    <a class="mail" href="mailto:${p.correo}"><i class="bi bi-envelope"></i></a>
    <a class="phone" href="tel:${p.telefono}"><i class="bi bi-telephone"></i></a>
    <a class="chat" href="https://wa.me/52${p.telefono}" target="_blank"><i class="bi bi-whatsapp"></i></a>
   </div>
  </div>`;
 });
}

function copyText(text,el){
 navigator.clipboard.writeText(text);
 el.classList.add("copied");
 setTimeout(()=>el.classList.remove("copied"),1200);
}

function setOffice(o){
 officeFilter=o;
 document.querySelectorAll(".filters button").forEach(b=>b.classList.remove("active"));
 event.target.classList.add("active");
 applyFilters();
}

function applyFilters(){
 const v=document.getElementById("search").value.toLowerCase();
 renderCards(
  people.filter(p=>{
   const matchText=Object.values(p).join(" ").toLowerCase().includes(v);
   const matchOffice=!officeFilter || p.oficina===officeFilter;
   return matchText && matchOffice;
  })
 );
}

/* ADMIN */
function askPass(action){
 pendingAction=action;
 document.getElementById("authModal").style.display="flex";
 document.getElementById("passInput").value="";
}

function validatePass(){
 const i=document.getElementById("passInput");
 if(i.value===ADMIN_PASS){
  closeModal();
  pendingAction();
 }else{
  i.classList.add("input-error");
  setTimeout(()=>i.classList.remove("input-error"),300);
 }
}

function closeModal(){
 document.getElementById("authModal").style.display="none";
}

function editPerson(i){
 alert("Formulario de edici√≥n (siguiente paso)");
}

function deletePerson(i){
 people.splice(i,1);
 applyFilters();
}

renderCards(people);
</script>

</body>
</html>
